<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <title>日志本</title>
    <link rel="stylesheet" href="../css/reset.css">
    <!--需要修改引入对应的css-->
    <link rel="stylesheet" href="../css/logBook.css">
    <!--需要修改引入对应的css-->
    <link rel="stylesheet" href="../css/mescroll.min.css">
</head>
<body>
    <div class="logBookWrapper">
        <div class="bookUser clearfix">
            <div class="bookWrap">
                <div class="userImg">
                    <img src="../images/bookUserImg.png" alt="">
                </div>
                <div class="userName">
                    <p class="name">遇见你眼光正好</p>
                    <p class="date">2017-08-24</p>
                </div>
            </div>
            <div class="follow">
                <span class="followImg">
                    <img src="../images/btn_one_n@2x.png" alt="">
                </span>
                    <span class="fllowTest">关注</span>
            </div>
        </div>
        <!--店铺-->
        <div class="bookShop">
            <div class="shopHead">
                <img src="../images/icon_store@2x.png" alt="">
                店铺
            </div>
            <div class="shopShow clearfix">
                <div class="shopImg">
                    <img src="../images/shopImg01.png" alt="">
                </div>
                <div class="shopMsg">
                    <img src="../images/btn_right_jump@2x.png" alt="">
                    <p class="shopName">北京通州万达可诺丹婷分院</p>
                    <p class="shopDetails">
                        服务人次：<span>345</span>综合评价：<span>5.0分</span>
                    </p>
                </div>
            </div>
            <div class="cosmetologist">
                专属美容师：<span>简爱</span>
                <img src="../images/btn_right_jump@2x.png" alt="">
            </div>
        </div>
        <!--相关商品-->
        <div class="relatedPro">
            <div class="relatedProHead">
                <img src="../images/icon_xiangguanshangpin@2x.png" alt="">
                相关商品
            </div>
            <div class="productMsg">
                <div class="productImg">
                    <img src="../images/productImg.png" alt="">
                </div>
                <div class="productText">
                    <p class="msg">泰妍雅集美白祛痘保湿补水祛斑+送 价值3960元半永久纹眉+瘦脸瘦身...</p>
                    <p class="buyNumber">
                        已有 <span>368</span>人购买
                    </p>
                </div>
                <div class="goSee">
                    去看看
                </div>
            </div>
        </div>
        <!--护理日志-->
        <div class="nurseLog">
            <div class="nurseLogHead clearfix">
                护理日志 <span>倒序排序 <img src="../images/icon_dao@2x.png" alt=""></span>
            </div>
            <p class="product">
                <img src="../images/btn_Article_links@2x.png" alt="">
                泰妍雅集丰韵套装
            </p>
            <ul class="logList">
                <li class="logItem">
                    <p class="logHead">
                        <span class="dot"></span>第<span class="count">2</span>篇日志<span class="date">2017-08-25</span>
                    </p>
                    <span class="lineRed"></span>
                    <div class="logContentWrapper">
                        <div class="logContent">
                            <p class="logContentText">
                                这里标题最多显示两行，超出就点点点为你我用了就点点点为你我用了半年的积蓄，漂洋过海的来看你记忆总是慢...
                            </p>
                            <ul class="logImgShow">
                                <li class="photo">
                                    <img src="../images/photo01.png" alt="">
                                </li>
                                <li class="photo">
                                    <img src="../images/photo02.png" alt="">
                                </li>
                                <li class="photo">
                                    <img src="../images/photo03.png" alt="">
                                </li>
                            </ul>
                            <ul class="logAttenList">
                                <li class="logAttenItem">
                                    <img src="../images/icon_browse@2x.png" alt="">
                                    2.16万
                                </li>
                                <li class="logAttenItem">
                                    <img src="../images/icon_dianzan_n@2x.png" alt="">
                                    2.16万
                                </li>
                                <li class="logAttenItem">
                                    <img src="../images/icon_comment@2x.png" alt="">
                                    2.16万
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li class="logItem">
                    <p class="logHead">
                        <span class="dot"></span>第<span class="count">1</span>篇日志<span class="date">2017-08-25</span>
                    </p>
                    <span class="lineRed"></span>
                    <div class="logContentWrapper">
                        <div class="logContent">
                            <p class="logContentText">
                                这里标题最多显示两行，超出就点点点为你我用了就点点点为你我用了半年的积蓄，漂洋过海的来看你记忆总是慢...
                            </p>
                            <ul class="logImgShow">
                                <li class="photo">
                                    <img src="../images/photo01.png" alt="">
                                </li>
                                <li class="photo">
                                    <img src="../images/photo02.png" alt="">
                                </li>
                                <li class="photo">
                                    <img src="../images/photo03.png" alt="">
                                </li>
                            </ul>
                            <ul class="logAttenList">
                                <li class="logAttenItem">
                                    <img src="../images/icon_browse@2x.png" alt="">
                                    2.16万
                                </li>
                                <li class="logAttenItem">
                                    <img src="../images/icon_dianzan_n@2x.png" alt="">
                                    2.16万
                                </li>
                                <li class="logAttenItem">
                                    <img src="../images/icon_comment@2x.png" alt="">
                                    2.16万
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <!--相关日志-->
        <div class="logAbout">

          <div class="logBorder">
              <div class="logHeadWrap">
                  <dvi class="logHead">
                      <img src="../images/icon_rizhiben@2x.png" alt="">
                      相关日志
                  </dvi>
              </div>
          </div>
            <!--用户列表-->
            <ul class="userAll" id="dataList">

            </ul>
            <!--loading图-->
            <!--<div class="loadingImg">
                <img src="../images/刷新1.png" alt="">
                每一天美一点～
            </div>-->
        </div>
        <!--回到顶部-->
        <div class="goTop">
            <img src="../images/btn_Back_to_the_top@2x.png" alt="">
        </div>
    </div>

<script type="text/javascript" src="../js/rem.js"></script>
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/mescroll.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        /****************************************************************************/
        var mescroll = new MeScroll("body", {
            down: {
                use: false,
                auto: true,
                callback: function (mescroll) {
                    //加载轮播数据
                    //loadSwiper();
                    //下拉刷新的回调,默认重置上拉加载列表为第一页
                    mescroll.resetUpScroll();
                },
            },
            //上拉加载的配置项
            up: {
                use: true,
                callback: getListData, //上拉回调,此处可简写; 相当于 callback: function (page) { getListData(page); }
                noMoreSize: 4, //如果列表已无数据,可设置列表的总数量要大于半页才显示无更多数据;避免列表数据过少(比如只有一条数据),显示无更多数据会不好看; 默认5
                empty: {
                    icon: "", //图标,默认null
                    tip: "", //提示
                    btntext: "", //按钮,默认""
                    /* btnClick: function(){//点击按钮的回调,默认null
                     /!* alert("点击了按钮,具体逻辑自行实现");*!/
                     }*/
                },
                clearEmptyId: "dataList", //相当于同时设置了clearId和empty.warpId; 简化写法;默认null
                toTop: { //配置回到顶部按钮
//                    src : "../res/img/mescroll-totop.png", //默认滚动到1000px显示,可配置offset修改
                    //offset : 1000
                },
                page: {
                    num: 0, //当前页 默认0,回调之前会加1; 即callback(page)会从1开始
                    size: 10, //每页数据条数
                    time: null //加载第一页数据服务器返回的时间; 防止用户翻页时,后台新增了数据从而导致下一页数据重复;
                },
//                warpClass: "mescroll-upwarp", //容器,装载布局内容,参见mescroll.css
//                htmlLoading: '<p class="upwarp-progress mescroll-rotate"></p><p class="upwarp-tip">哈哈你看我出来不</p>', //上拉加载中的布局
                htmlLoading: '<div class="loadingImg"><img src="../images/刷新1.gif" alt="">每一天美一点～ </div>', //上拉加载中的布局
                htmlNodata: '<p class="upwarp-nodata">好棒，内容都被你看光光了～</p>', //无数据的布局
            }
        });
        /*联网加载列表数据  page = {num:1, size:10}; num:当前页 从1开始, size:每页数据条数 */
        function getListData(page) {
            console.log(page)
            //联网加载数据
            getListDataFromNet(pdType, page.num, page.size, function (curPageData) {
                console.log("pdType=" + pdType + ", page.num=" + page.num + ", page.size=" + page.size + ", curPageData.length=" + curPageData.length);
                mescroll.endSuccess(curPageData.length);
                console.log(curPageData)
                console.log(page)

                //设置列表数据
                setListData(curPageData);
            }, function () {
                //联网失败的回调,隐藏下拉刷新和上拉加载的状态;
                mescroll.endErr();
            });
        }
        /*设置列表数据*/
        function setListData(curPageData) {
            console.log(curPageData.length)
            var listDom = document.getElementById("dataList");
            for (var i = 0; i < curPageData.length; i++) {
                var pd = curPageData[i];

                var str =' <div class="userList">';
                str +=' <div class="userHeader clearfix"> ' +
                        '<div class="userImg"> ' +
                        '<img src="../images/userImg01.png" alt=""> ' +
                        '</div> ' +
                        '<p class="userMessage">天使BAB<img src="../images/icon_grade-level@2x.png" alt=""><span class="levelNum">2</span></p> ' +
                        '<p class="userText">一分钟前</p> ' +
                        '<div class="follow"> ' +
                        '<span class="followImg"><img src="../images/btn_one_n@2x.png" alt=""></span> ' +
                        '<span class="fllowTest">关注</span> ' +
                        '</div> ' +
                        '</div>';
                str +=' <div class="userPhoto clearfix"> ' +
                        '<div class="left"> ' +
                        '<img src="../images/userBefore.png" alt=""> ' +
                        '<div class="before">Before </div> ' +
                        '</div> ' +
                        '<div class="right"> ' +
                        '<img src="../images/userAfter.png" alt=""> ' +
                        '<div class="after">After </div> ' +
                        '</div> ' +
                        '</div>';
                str +=' <div class="userComment">' +
                        '不知道下一次超声刀是什么时候，眼镜都看不见了啊真 变得太厉害了，我要当天山童姥！！！ ' +
                        '</div>';
                str +=' <div class="userPro"> ' +
                        '<span class="iconCom"></span> ' +
                        '<span class="userProName">泰妍雅集丰韵套装</span> ' +
                        '</div>';
                str +='<div class="attention"> ' +
                        '<div class="view"> ' +
                        '<img src="../images/icon_browse@2x.png" alt=""> ' +
                        '<span class="viewNum">2.16万</span> ' +
                        '</div> ' +
                        '<div class="support"> ' +
                        '<img src="../images/icon_Give%C2%A0the%C2%A0thumbs-up@2x.png" alt=""> ' +
                        '<span class="viewNum">2.16万</span> ' +
                        '</div> ' +
                        '<div class="comment"> ' +
                        '<img src="../images/icon_comment@2x.png" alt=""> ' +
                        '<span class="viewNum">2.16万</span> ' +
                        '</div> ' +
                        '</div>';
                str += '</div>';
                var liDom = document.createElement("li");
                liDom.innerHTML = str;
                listDom.appendChild(liDom);

            }
        }
        /*联网加载列表数据*/
        function getListDataFromNet(pdType, pageNum, pageSize, successCallback, errorCallback) {
            //延时一秒,模拟联网
            setTimeout(function () {
                $.ajax({
                    type: 'GET',
                    url: '../json/pdlist1.json',
                    dataType: 'json',
                    success: function (data) {
                        var listData = [];
                        //pdType 全部商品0; 奶粉1; 面膜2; 图书3;
                        if (pdType == 0) {
                            //全部商品 (模拟分页数据)
                            for (var i = (pageNum-1)*pageSize; i < pageNum*pageSize; i++) {
                                if(i==data.length) break;
                                listData.push(data[i]);
                            }
                        } else if (pdType == 1) {
                            //奶粉
                            for (var i = 0; i < data.length; i++) {
                                if (data[i].pdName.indexOf("奶粉") != -1) {
                                    listData.push(data[i]);
                                }
                            }
                        } else if (pdType == 2) {
                            //面膜
                            for (var i = 0; i < data.length; i++) {
                                if (data[i].pdName.indexOf("面膜") != -1) {
                                    listData.push(data[i]);
                                }
                            }
                        } else if (pdType == 3) {
                            //图书
                            for (var i = 0; i < data.length; i++) {
                                if (data[i].pdName.indexOf("图书") != -1) {
                                    listData.push(data[i]);
                                }
                            }
                        }
                        //回调
                        successCallback(listData);

                    },
                    error: errorCallback
                });
            }, 1000)
        }
        /*初始化菜单*/
        var pdType = 0;//全部商品一次排列分别是：0,1,2,3,4,5,6......
       /* $(".scareList li").click(function () {
            var i = $(this).attr("i");
            if (pdType != i) {
                //更改列表条件
                pdType = i;
                $(".scareList .activeShowItem").removeClass("activeShowItem");
                $(this).addClass("activeShowItem");
                //重置列表数据
                mescroll.resetUpScroll();
            }
        })*/
        /****************************************************************************/
        goTop()
        function goTop() {
            $('.goTop').click(function () {
                $(document).scrollTop(0);
            })
        }
    })
</script>
</body>
</html>